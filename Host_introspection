#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Host_introspection
#c# 2016-02-02 <RC, 2018-11-15 <RC
#m# MOAR: OK
#j# JVM:  BROKEN 

# java.lang.ClassCastException: org.perl6.nqp.sixmodel.reprs.CArrayInstance cannot be cast to org.perl6.nqp.sixmodel.reprs.CStructInstance
#  in sub nativecast at /Users/dhoekman/.rakudobrew/jvm-master/install/share/perl6/sources/24DD121B5B4774C04A7084827BFAD92199756E03 (NativeCall) line 680

my @res;

# Endian detection translated from C.

use NativeCall;

@res.push: $*VM.config<ptr_size>;
my $bytes = nativecast(CArray[uint8], CArray[uint16].new(1));
@res.push: $bytes[0] ?? "little-endian" !! "big-endian";

.say for @res;

my $ref = q:to/END/;
8
little-endian
END

use Test;
is @res.join("\n"), chomp $ref;
