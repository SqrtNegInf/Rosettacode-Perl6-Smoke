#!/usr/bin/env perl6
#u# https://gist.github.com/smls/1484e13b89490e218ddc
#c# 2016-11-30 <RC
#m# MOAR: BROKEN
#j#  JVM: BROKEN

srand 123456;

use experimental :cached;

sub infix:<joins> ($a,$b) is cached {
dd $a;
dd $b;
    $a.substr(*-1,1) eq $b.substr(0,1) ?? "$a $b" !! Empty;
}

sub amb { @_.pick(*) }

say first *, (
    amb(<the that a>)           Xjoins
    amb(<elephant thing>)       Xjoins
    amb(<walked treaded grows>) Xjoins
    amb(<slowly quickly>)
);
