#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Longest_Common_Substring
#c# 2016-05-15 <RC, 2021-02-xx >RC
#m# MOAR: OK
#j#  JVM: OK

sub substrings($word) {
    my $l = $word.chars;
    (flat (0..$l X 1..$l).grep:{.[1] <= $l-.[0]}).map: -> $a, $b { $word.substr($a, $b) }
}

sub infix:<LCS>($s1, $s2) {
    ([âˆ©] ($s1, $s2)>>.&substrings).keys.sort(*.chars).tail
}

my $first  = 'thisisatest'; 
my $second = 'testing123testing';
say "The longest common substring between '$first' and '$second' is '{$first LCS $second}'.";

use Test;
is ('thisisatest' LCS 'testing123testing'), 'test';
