#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Draw_a_pixel
#t# skiptest
#c# 2018-06-13 <RC
#m# MOAR: BROKEN
#j# JVM:  BROKEN

# Works with: Rakudo version 2018.05
# Really? Draw a single pixel? Sigh.

#`{{
use GTK::Simple;
use GTK::Simple::DrawingArea;
use Cairo;
 
my $app = GTK::Simple::App.new(:title('Draw a Pixel'));
my $da  = GTK::Simple::DrawingArea.new;
gtk_simple_use_cairo;
 
$app.set-content( $da );
$app.border-width = 5;
$da.size-request(320,240);
 
sub rect-do( $d, $ctx ) {
    given $ctx {
        .rgb(1, 0, 0);
        .rectangle(100, 100, 1, 1);
        .fill;
    }
}
 
my $ctx = $da.add-draw-handler( &rect-do );
$app.run;


my $ref = qq:to/END/;
END

use Test;
#my $ref = $*VM ~~ /jvm/ ?? $jvm !! $moar;
#is @res.join("\n"), chomp $ref;
}}
