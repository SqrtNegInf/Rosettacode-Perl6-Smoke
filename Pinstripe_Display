#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Pinstripe/Display
#c# 2015-12-20 <>RC, 2017-06-04 >RC
#t# graphical
#m# MOAR: OK
#j#  JVM: OK
#f# RC file: pinstripes.pgm

my $HOR = 1280;
my $VERT = 720;

my @colors = 0, 1;

spurt "run/pinstripes.pgm", qq:to/EOH/; # DH change 2017-06-04 work-around for writing text before binary data
    P5
    # pinstripes.pgm
    $HOR $VERT
    1
    EOH

my $PGM = open "run/pinstripes.pgm", :a, :bin or die "Can't append to pinstripes.pgm: $!"; # DH change 2017-06-04
my $vzones = $VERT div 4;
for 1..4 -> $w {
    my $hzones = ceiling $HOR / $w / +@colors;
    
#    my $line = Buf.new: splice((flat (@colors Xxx $w) xx $hzones).Array, 0, $HOR); # DH 2017-06-04 now works...
    my $line = Buf.new: (flat((@colors Xxx $w) xx $hzones).Array).splice(0,$HOR); # DH change 2015-12-20

    $PGM.write: $line for ^$vzones;
}

$PGM.close;
