#!/usr/bin/env perl6
#u# http://rosettacode.org/wiki/Median_filter
#c# 2018-11-30 <RC
#m# MOAR: BROKEN
#j# JVM:  BROKEN
#  {{Works with|rakudo|2018.11}} or {{broken|Perl 6}}  

my @res;


# This example is broken. It fails to compile or causes a runtime error. Please fix the code and remove this message.


# Reference: https://github.com/azawawi/perl6-magickwand
 
# WIP by module author
 
#!/usr/bin/env perl6
 
use MagickWand;
 
# A new magic wand
my $original = MagickWand.new;
 
# Read an image
$original.read("image/example.jpg");
 
# apply median filter
say "Median Filter...";
my $o = $original.clone;
$o.median-filter;
$o.label("Median Filter");
# And then write a new image
$o.write("output.png");
 
# And cleanup on exit
LEAVE {
  $original.cleanup   if $original.defined;
  $o.cleanup if $o.defined;
}


.say for @res;

my $ref = q:to/END/;
END

use Test;
#my $ref = $*VM ~~ /jvm/ ?? $jvm !! $moar;
#is @res.join("\n"), chomp $ref;
